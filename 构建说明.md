# 构建说明

## 🚨 重要提示

由于Windows批处理文件的中文编码问题，建议使用英文版本的构建脚本。

## 📋 可用的构建脚本

### 1. 快速构建（推荐）
```bash
quick-build.bat
```
- **用途**: 快速构建自包含版本
- **特点**: 简单、快速、无编码问题
- **输出**: `publish\` 目录

### 2. 完整构建（英文版）
```bash
build-en.bat
```
- **用途**: 构建两个版本（自包含 + 依赖框架）
- **特点**: 完整功能、详细输出
- **输出**: `publish\win-x64\` 和 `publish\win-x64-framework-dependent\`

### 3. 完整打包（英文版）
```bash
package-en.bat
```
- **用途**: 构建并打包成ZIP文件
- **特点**: 包含文档、创建压缩包
- **输出**: `packages\` 目录中的ZIP文件

### 4. 系统测试（英文版）
```bash
test-en.bat
```
- **用途**: 测试系统环境和权限
- **特点**: 检查所有必要条件
- **要求**: 必须以管理员身份运行

## 🛠️ 使用步骤

### 方法一：快速构建（推荐新手）

1. 双击运行 `quick-build.bat`
2. 等待构建完成
3. 在 `publish\` 目录找到可执行文件
4. 右键点击 `.exe` 文件，选择"以管理员身份运行"

### 方法二：完整构建

1. 双击运行 `build-en.bat`
2. 选择需要的版本：
   - 自包含版本：`publish\win-x64\`
   - 依赖框架版本：`publish\win-x64-framework-dependent\`
3. 右键点击 `.exe` 文件，选择"以管理员身份运行"

### 方法三：完整打包

1. 双击运行 `package-en.bat`
2. 在 `packages\` 目录找到ZIP文件
3. 解压ZIP文件到目标位置
4. 右键点击 `.exe` 文件，选择"以管理员身份运行"

## 🔍 故障排除

### 问题1：编码错误
**现象**: 出现乱码或"不是内部或外部命令"错误
**解决**: 使用英文版脚本（`*-en.bat`）

### 问题2：.NET SDK未找到
**现象**: "dotnet不是内部或外部命令"
**解决**: 
1. 下载安装 [.NET 6.0 SDK](https://dotnet.microsoft.com/download/dotnet/6.0)
2. 重启命令行窗口

### 问题3：构建失败
**现象**: "BUILD FAILED" 或构建错误
**解决**:
1. 检查项目文件是否完整
2. 确保在项目根目录运行脚本
3. 检查磁盘空间是否充足

### 问题4：权限不足
**现象**: 无法创建目录或文件
**解决**: 以管理员身份运行命令行，然后执行脚本

## 📁 输出文件说明

### 自包含版本
- **位置**: `publish\win-x64\`
- **特点**: 包含所有运行时文件，无需安装.NET
- **大小**: 约100MB
- **适用**: 所有用户

### 依赖框架版本
- **位置**: `publish\win-x64-framework-dependent\`
- **特点**: 需要预装.NET 6.0运行时
- **大小**: 约10MB
- **适用**: 已安装.NET的用户

## 🚀 运行应用程序

### 重要提示
⚠️ **必须以管理员身份运行应用程序**

### 运行步骤
1. 找到构建输出的 `.exe` 文件
2. 右键点击文件
3. 选择 **"以管理员身份运行"**
4. 在UAC提示中点击 **"是"**
5. 使用默认密码 `admin123` 登录

### 首次使用
- 默认密码：`admin123`
- 建议首次登录后修改密码
- 应用会自动创建配置目录和备份目录

## 📋 检查清单

构建完成后，请检查：

- [ ] 可执行文件存在且大小正常
- [ ] 能够以管理员身份启动应用
- [ ] 登录界面正常显示
- [ ] 能够使用默认密码登录
- [ ] 主界面正常显示
- [ ] 能够添加测试网站
- [ ] 开关功能正常工作

## 💡 提示

1. **推荐使用自包含版本**，无需安装额外软件
2. **保存构建输出**，避免重复构建
3. **测试所有功能**，确保正常工作
4. **备份重要数据**，避免意外丢失

---

如果遇到其他问题，请参考《使用说明.md》中的故障排除部分。
