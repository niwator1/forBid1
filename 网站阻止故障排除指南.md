# 网站阻止故障排除指南

如果您发现网站阻止功能不起作用，请按照以下步骤进行排查：

## 🔍 基本检查

### 1. 确认应用程序以管理员身份运行
- 右键点击应用程序图标
- 选择"以管理员身份运行"
- 这是修改 hosts 文件的必要条件

### 2. 检查网站是否已添加并启用阻止
- 在应用程序中确认网站已添加到列表
- 确认网站旁边的开关是"开启"状态（绿色）
- 尝试删除并重新添加网站

### 3. 验证 hosts 文件是否被修改
- 打开文件管理器
- 导航到 `C:\Windows\System32\drivers\etc\`
- 用记事本打开 `hosts` 文件
- 查找包含"崔子瑾诱捕器"的条目

## 🌐 浏览器相关问题

### Chrome 浏览器
1. **禁用 DNS over HTTPS (DoH)**：
   - 打开 Chrome 设置
   - 搜索"安全DNS"或"DNS"
   - 关闭"使用安全DNS"选项

2. **清除浏览器缓存**：
   - 按 `Ctrl + Shift + Delete`
   - 选择"所有时间"
   - 勾选"缓存的图片和文件"
   - 点击"清除数据"

### Firefox 浏览器
1. **禁用 DNS over HTTPS**：
   - 在地址栏输入 `about:config`
   - 搜索 `network.trr.mode`
   - 将值设置为 `5`（禁用DoH）

2. **清除DNS缓存**：
   - 在地址栏输入 `about:networking#dns`
   - 点击"Clear DNS Cache"

### Edge 浏览器
1. **禁用安全DNS**：
   - 打开 Edge 设置
   - 搜索"安全DNS"
   - 关闭"使用安全DNS"

## 💻 系统级解决方案

### 1. 手动清理DNS缓存
打开命令提示符（管理员）并运行：
```cmd
ipconfig /flushdns
```

### 2. 重启网络适配器
```cmd
ipconfig /release
ipconfig /renew
```

### 3. 检查代理设置
- 确保浏览器没有使用代理服务器
- 代理服务器会绕过 hosts 文件

## 🛡️ 高级解决方案

### 1. 使用路由器级别阻止
- 登录路由器管理界面
- 在"家长控制"或"访问控制"中添加网站

### 2. 使用第三方DNS服务
- 设置DNS为支持内容过滤的服务
- 例如：OpenDNS (208.67.222.222)

### 3. 防火墙规则
- 在Windows防火墙中创建出站规则
- 阻止特定域名的连接

## 🔧 测试方法

### 1. 使用命令行测试
```cmd
nslookup 被阻止的网站.com
```
如果返回 127.0.0.1，说明阻止生效

### 2. 使用ping命令
```cmd
ping 被阻止的网站.com
```
应该显示ping 127.0.0.1

### 3. 浏览器测试
- 在浏览器中访问被阻止的网站
- 应该显示"无法访问此网站"或类似错误

## ⚠️ 常见问题

### Q: 为什么有些网站仍然可以访问？
A: 现代网站使用CDN和多个域名，可能需要阻止更多相关域名。

### Q: 手机上的应用还能访问被阻止的网站？
A: hosts文件只影响当前电脑，不影响其他设备。

### Q: 重启电脑后设置失效？
A: 检查杀毒软件是否恢复了hosts文件，将应用程序添加到白名单。

## 📞 获取帮助

如果以上方法都无法解决问题：
1. 运行应用程序目录中的 `debug-hosts.bat` 诊断工具
2. 检查Windows事件查看器中的错误日志
3. 确保没有其他安全软件干扰hosts文件

---

**提示**：某些企业网络环境可能有额外的网络策略，这种情况下hosts文件可能无法正常工作。
